title: 
  text: Query for documents with ``cust_id`` equal to ``"xyz321"``.
  character: "`"
stepnum: 1
pre: |
  Query the ``orders`` collection, specifying ``{ cust_id: "xyz321" }``
  as the query condition.
ref: ""
action:
  language: javascript
  code: |
     db.orders.find( { cust_id: "xyz321" } )
post: |
  The query returns a cursor to the matching documents in the
  collection, and the :program:`mongo` shell displays up to 20 matching
  documents.
---
title:
  text: Review displayed results.
  character: "`"
stepnum: 2
ref: ""
pre: |
  The query matched only those documents with the ``cust_id`` field equal
  to ``"xyz321"``.
action:
  language: javascript
  code: |
    { "_id" : ObjectId("5373aa72c9f811cde82d54bb"), "cust_id" : "xyz321", "ord_date" : ISODate("2014-04-15T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "qqq", "qty" : 10, "price" : 10 } ], "shipping" : { "location" : "Warehouse 3", "mode" : "airfreight" } }
    { "_id" : ObjectId("5373aa72c9f811cde82d54bc"), "cust_id" : "xyz321", "ord_date" : ISODate("2014-04-15T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "yyy", "qty" : 10, "price" : 10 } ], "shipping" : { "location" : "Warehouse 3", "mode" : "airfreight" } }
    { "_id" : ObjectId("5373aa72c9f811cde82d54bd"), "cust_id" : "xyz321", "ord_date" : ISODate("2014-04-15T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "zzz", "qty" : 10, "price" : 10 } ], "shipping" : { "location" : "Warehouse 3", "mode" : "airfreight" } }
---
title:
  text: Query by a field in an embedded document.
  character: "`"
stepnum: 3
ref: ""
pre: |
  To specify a condition on a field within an embedded document, use
  the :term:`dot notation`. Dot notation requires quotes around the
  dotted field names in the query condition.

  For example, to return only the documents where the ``location`` field in the ``shipping`` document
  equals ``"Warehouse 1"``, query
  the ``orders`` collection, specifying ``{ "shipping.location": "Warehouse 1" }`` as
  the query condition.
action:
  language: javascript
  code: |
      db.orders.find( { "shipping.location": "Warehouse 1" } )
---
title:
  text: Verify the results.
  character: "`"
stepnum: 4
ref: ""
pre: |
  The displayed documents show that the query matched only those
  documents where the ``location`` field in the ``shipping`` document
  equals ``"Warehouse 1"``.
action:
  language: javascript
  code: |
     { "_id" : ObjectId("5373aa72c9f811cde82d54b2"), "cust_id" : "abc123", "ord_date" : ISODate("2014-04-01T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "xxx", "qty" : 25, "price" : 1 }, { "sku" : "yyy", "qty" : 25, "price" : 1 } ], "shipping" : { "location" : "Warehouse 1", "mode" : "airfreight" } }
     { "_id" : ObjectId("5373aa72c9f811cde82d54b3"), "cust_id" : "stu523", "ord_date" : ISODate("2014-04-22T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "xyz", "qty" : 5, "price" : 10 } ], "shipping" : { "location" : "Warehouse 1", "mode" : "airfreight" } }
     { "_id" : ObjectId("5373aa72c9f811cde82d54b4"), "cust_id" : "ijk021", "ord_date" : ISODate("2014-04-15T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "wxy", "qty" : 10, "price" : 15 }, { "sku" : "xyz", "qty" : 5, "price" : 10 } ], "shipping" : { "location" : "Warehouse 1", "mode" : "airfreight" } }
---
title:
  text: Query by a field in an embedded document.
  character: "`"
stepnum: 4
ref: ""
pre: |
  To specify a condition on a field within an embedded document, use
  the :term:`dot notation`. Dot notation requires quotes around the
  dotted field names in the query condition.

  For example, to return only the documents whose ``items`` array
  contains a document with a field ``sku`` equal to ``"yyy"``, query
  the ``orders`` collection, specifying ``{ "items.sku": "yyy" }`` as
  the query condition.
action:
  language: javascript
  code: |
      db.orders.find( { "items.sku": "yyy" } )
---
title:
  text: Verify the results.
  character: "`"
stepnum: 5
ref: ""
pre: |
  The displayed documents show that the query matched only those
  documents where the ``items`` array contains an embedded document
  that contains a field ``sku`` equal to ``"yyy"``.
action:
  language: javascript
  code: |
      { "_id" : ObjectId("5373aa72c9f811cde82d54b2"), "cust_id" : "abc123", "ord_date" : ISODate("2014-04-01T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "xxx", "qty" : 25, "price" : 1 }, { "sku" : "yyy", "qty" : 25, "price" : 1 } ], "shipping" : { "location" : "Warehouse 1", "mode" : "airfreight" } }
      { "_id" : ObjectId("5373aa72c9f811cde82d54b5"), "cust_id" : "abc123", "ord_date" : ISODate("2014-04-15T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "yyy", "qty" : 15, "price" : 20 } ], "shipping" : { "location" : "Warehouse 2", "mode" : "airfreight" } }
      { "_id" : ObjectId("5373aa72c9f811cde82d54b6"), "cust_id" : "ijk021", "ord_date" : ISODate("2014-04-27T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "zzz", "qty" : 20, "price" : 25 }, { "sku" : "yyy", "qty" : 15, "price" : 20 } ], "shipping" : { "location" : "Warehouse 2", "mode" : "train" } }
      { "_id" : ObjectId("5373aa72c9f811cde82d54b7"), "cust_id" : "abc123", "ord_date" : ISODate("2014-04-08T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "yyy", "qty" : 25, "price" : 30 } ], "shipping" : { "location" : "Warehouse 3", "mode" : "airfreight" } }
      { "_id" : ObjectId("5373aa72c9f811cde82d54b9"), "cust_id" : "abc123", "ord_date" : ISODate("2014-04-15T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "yyy", "qty" : 10, "price" : 10 } ], "shipping" : { "location" : "Warehouse 3", "mode" : "airfreight" } }
      { "_id" : ObjectId("5373aa72c9f811cde82d54bc"), "cust_id" : "xyz321", "ord_date" : ISODate("2014-04-15T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "yyy", "qty" : 10, "price" : 10 } ], "shipping" : { "location" : "Warehouse 3", "mode" : "airfreight" } }
      { "_id" : ObjectId("5373aa72c9f811cde82d54bf"), "cust_id" : "ijk021", "ord_date" : ISODate("2014-04-15T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "yyy", "qty" : 10, "price" : 10 } ], "shipping" : { "location" : "Warehouse 3", "mode" : "airfreight" } }
---
title:
  text: Combine the two query conditions.
  character: "`"
stepnum: 6
ref: ""
pre: |
  To query for documents where ``cust_id`` equals ``"xyz321"``
  *and* the ``items`` array contains a document with a field ``sku``
  equal to ``"yyy"``, combine with a comma (``,``) the conditions in
  a single document structure.
action:
  language: javascript
  code: |
      db.orders.find( { cust_id: "xyz321", "items.sku": "yyy" } )
---
title:
  text: Verify the results.
  character: "`"
stepnum: 7
ref: ""
pre: |
  The displayed documents show that the query matched only those
  documents that satisfy both criteria.
action:
  language: javascript
  code: |
    { "_id" : ObjectId("5373aa72c9f811cde82d54bc"), "cust_id" : "xyz321", "ord_date" : ISODate("2014-04-15T04:00:00Z"), "status" : "A", "items" : [ { "sku" : "yyy", "qty" : 10, "price" : 10 } ], "shipping" : { "location" : "Warehouse 3", "mode" : "airfreight" } }
...